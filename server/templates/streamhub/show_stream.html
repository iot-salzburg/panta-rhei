{% extends 'layout.html' %}

{% block body %}

  <table class="table">
  <tr>
      <td>
        <h1> <small>Streams name: </small> <br>{{payload.name}}</h1>
        <h3> <small> Status: {{payload.status}} </small></h3>
        <h3> <small> Source system: {{payload.input_system}} </small></h3>
        <h3> <small> Target system: {{payload.output_system}} </small></h3>
    <!--    <h5> <small> Metadata URI: {{payload.metadata_uri}}</small></h5>-->
        {% if payload.description %}
        {{payload.description}}
        {% endif %}

          <br>
          <br>
    <h2> <small> Stream filter logic: </small></h2>
    <pre id="json"></pre>

      </td>

        <td>

    <h3> <small>Actions</small></h3>
    <!--     <a class="btn btn-info float-right mb-2" href="/edit_stream/{{payload.system_uuid}}/{{payload.name}}"> edit description </a>-->
         <a class="btn btn-success float-right mb-2" href="/deploy_stream/{{payload.system_uuid}}/{{payload.name}}"
            data-toggle="tooltip" title="Deploy this stream application."> deploy stream </a>

         <a class="btn btn-info float-right mb-2" href="/pause_stream/{{payload.system_uuid}}/{{payload.name}}"
            data-toggle="tooltip" title="Pause this stream application."> pause stream </a>

         <a class="btn btn-danger float-right mb-2" href="/delete_stream/{{payload.system_uuid}}/{{payload.name}}"
            data-toggle="tooltip" title="Delete this stream application."> delete stream </a>
          <br>
          <br>

      </td>
  </tr>
  <tr>
  </tr>
  </table>

  <script>
    var data = {
        "filter": '{{payload.filter}}'};
    document.getElementById("json").innerHTML = JSON.stringify(data, undefined, 2);
  </script>


  <hr>
  <table class="table table-striped">
    <tr>
      <th>Name of the Stream</th>
      <th>Source System</th>
      <th>Target System</th>
      <th>Creator's mail</th>
      <th>Created at</th>
<!--      <th>Creator</th>-->
    </tr>
      <tr>
        <td><a href="/show_stream/{{payload.system_uuid}}/{{payload.name}}" class="btn btn-block">{{payload.name}}</a></td>
        <td><a href="/show_stream/{{payload.system_uuid}}/{{payload.name}}" class="btn btn-block">{{payload.input_system}}</a></td>
        <td><a href="/show_stream/{{payload.system_uuid}}/{{payload.name}}" class="btn btn-block">{{payload.output_system}}</a></td>
        <td><a href="/show_stream/{{payload.system_uuid}}/{{payload.name}}" class="btn btn-block">{{payload.contact_mail}}</a></td>
        <td><a href="/show_stream/{{payload.system_uuid}}/{{payload.name}}" class="btn btn-block">{{payload.datetime}}</a></td>

      </tr>
  </table>

  <br>
  <br>
{% endblock %}
