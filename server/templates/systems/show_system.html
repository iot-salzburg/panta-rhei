{% extends 'layout.html' %}

{% block body %}

  <table class="table">
  <td>
    <h1> <small> System: {{payload.domain}}.{{payload.enterprise}}.{{payload.workcenter}}.{{payload.station}} </small></h1>
    <h3> <small> Part of the company: {{payload.domain}}.{{payload.enterprise}} </small></h3>
    {% if payload.creator_mail %}
    <h3> <small> Created by {{payload.creator_mail}} at {{payload.sys_datetime}}. </small></h3>
    {% endif %}
    {% if payload.description %}
    {{payload.description}}
    {% endif %}
  </td>
  <td>
<!--     <a class="btn btn-info float-right mb-2" href="/edit_client/{{payload.system_uuid}}/{{payload.name}}"> edit description </a>-->
     <a class="btn btn-danger float-right" href="/delete_system/{{payload.system_uuid}}"
        data-toggle="tooltip" title="Only empty systems can be deleted."> delete system </a>
  </td>
  </table>

  <hr>
  <h2> <small> Agents </small></h2>
  <table class="table table-striped">
    <tr>
      <th>First Name</th>
      <th>Name</th>
      <th>Contact</th>
      <th></th>
    </tr>
      {% for agent in agents %}
      <tr>
        <td>{{agent.first_name}}</td>
        <td>{{agent.sur_name}}</td>
        <td>{{agent.agent_mail}}</td>
        <td>
            <a class="btn btn-danger float-right" href="/delete_agent_system/{{agent.system_uuid}}/{{agent.agent_uuid}}"
        data-toggle="tooltip" title="Remove this user as agent from the company."> remove </a>
        </td>
    {% endfor %}
  </table>

  <a href="/add_agent_system/{{payload.system_uuid}}" class="btn btn-success"
        data-toggle="tooltip" title="Add a registered user as new agent for this system.">Add Agent</a>

  <br>
  <br>
<!---------------------------------------------------------------------------------------------->

  <hr>
  <h2> <small> Client applications </small></h2>
  <table class="table table-striped">
    <tr>
      <th>Name</th>
      <th>Company</th>
      <th>System</th>
      <th>Creator</th>
<!--      <th>Created at</th>-->
<!--      <th>Creator</th>-->
      <th></th>
      <th></th>
    </tr>
      {% for client in clients %}
      <tr>
        <td><a href="/show_client/{{client.system_uuid}}/{{client.name}}" class="btn btn-block">{{client.name}}</a></td>
        <td><a href="/show_client/{{client.system_uuid}}/{{client.name}}" class="btn btn-block">{{client.domain}}.{{client.enterprise}}</a></td>
        <td><a href="/show_client/{{client.system_uuid}}/{{client.name}}" class="btn btn-block">{{client.workcenter}}.{{client.station}}</a></td>
        <td><a href="/show_client/{{client.system_uuid}}/{{client.name}}" class="btn btn-block">{{client.contact_mail}}</a></td>
<!--        <td><a href="/show_client/{{client.system_uuid}}/{{client.name}}" class="btn btn-block">{{client.datetime}}</a></td>-->
<!--        <td>{{client.contact_mail}}</td>-->
        <td><a href="/show_client/{{client.system_uuid}}/{{client.name}}" class="btn btn-info float-right"
          data-toggle="tooltip" title="Manage this client.">manage</a></td>
        <td><a class="btn btn-danger float-right" href="/delete_client/{{client.system_uuid}}/{{client.name}}"
        data-toggle="tooltip" title="Delete this client application."> delete </a></td>
      </tr>
    {% endfor %}
  </table>
  <a class="btn btn-success" href="/add_client/{{payload.system_uuid}}"
        data-toggle="tooltip" title="Add a new client application for this system."> Add Client</a>

  <br>
  <br>
{% endblock %}
